<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<title> Was HTML5 Canvas vs Moveable Type: Botzilla=Web+Suffering-Meaning</title>

<link rel="stylesheet" href="https://www.botzilla.com/blog/styles-site.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://www.botzilla.com/blog/index.rdf" />

<link rel="start" href="https://www.botzilla.com/blog/" title="Home" />
<link rel="prev" href="https://www.botzilla.com/blog/archives/000736.html" title="Playing All Sides" />



<script language="javascript" type="text/javascript" src="/jquery.js"></script><script type="text/javascript" language="javascript">
<!--

function OpenTrackback (c) {
    window.open(c,
                    'trackback',
                    'width=480,height=480,scrollbars=yes,status=yes');
}

var HOST = 'www.botzilla.com';

// Copyright (c) 1996-1997 Athenia Associates.
// http://www.webreference.com/js/
// License is granted if and only if this entire
// copyright notice is included. By Tomer Shiran.

function setCookie (name, value, expires, path, domain, secure) {
    var curCookie = name + "=" + escape(value) + ((expires) ? "; expires=" + expires.toGMTString() : "") + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + ((secure) ? "; secure" : "");
    document.cookie = curCookie;
}

function getCookie (name) {
    var prefix = name + '=';
    var c = document.cookie;
    var nullstring = '';
    var cookieStartIndex = c.indexOf(prefix);
    if (cookieStartIndex == -1)
        return nullstring;
    var cookieEndIndex = c.indexOf(";", cookieStartIndex + prefix.length);
    if (cookieEndIndex == -1)
        cookieEndIndex = c.length;
    return unescape(c.substring(cookieStartIndex + prefix.length, cookieEndIndex));
}

function deleteCookie (name, path, domain) {
    if (getCookie(name))
        document.cookie = name + "=" + ((path) ? "; path=" + path : "") + ((domain) ? "; domain=" + domain : "") + "; expires=Thu, 01-Jan-70 00:00:01 GMT";
}

function fixDate (date) {
    var base = new Date(0);
    var skew = base.getTime();
    if (skew > 0)
        date.setTime(date.getTime() - skew);
}

function rememberMe (f) {
    var now = new Date();
    fixDate(now);
    now.setTime(now.getTime() + 365 * 24 * 60 * 60 * 1000);
    setCookie('mtcmtauth', f.author.value, now, '', HOST, '');
    setCookie('mtcmtmail', f.email.value, now, '', HOST, '');
    setCookie('mtcmthome', f.url.value, now, '', HOST, '');
}

function forgetMe (f) {
    deleteCookie('mtcmtmail', '', HOST);
    deleteCookie('mtcmthome', '', HOST);
    deleteCookie('mtcmtauth', '', HOST);
    f.email.value = '';
    f.author.value = '';
    f.url.value = '';
}

function fbBut(URL) {
	var ut = URL;
	ut = ut.replace(/:/,'%3A'); // just one
	ut = ut.replace(/\//g,'%2F');
	return "//www.facebook.com/plugins/like.php?href="+ut+"&amp;send=false&amp;layout=standard&amp;width=450&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=35";
}

//-->
</script>





</head>

<body>

<div id="banner" style="width:840px;" style="backround-color: #eef;">
<a href="https://www.botzilla.com/blog/"><img src="https://www.botzilla.com/blog/pix2007/banner3.gif" width=840 height=24 border=0 hspace=0 vspace=0
	 title="On the web since 1994"></a>
</div><!-- end banner div -->

<!--  BANNER  -->
<div id="banner">
<table cellpadding=2 cellspacing=4 border=0 width="100%">
<tr><td valign="top" align="left">
<!-- <p><span class="description">Botzilla=Web+Suffering-Meaning: Optimistically world-weary since 1994.</span></p> -->
<h1><b>Was HTML5 Canvas vs Moveable Type</b></h1> <!-- TRY THIS -->
</td>
  <td valign="top" align="right">
      <a href="https://www.botzilla.com/blog/archives/cat_nuke_em_from_orbit.html">
     <img src="/bpix/Nuke Em from Orbit.jpg" alt="Nuke Em from Orbit" width=75 height=50 border=2 title="Nuke Em from Orbit" ></a>
   
  </td></tr>

<!--  TOP TITLE, SUPPRESSED  -->

<!-- <tr><td valign="top" align="left" colspan=2>
<p><span style="font-family:  Arial, Verdana, Helvetica, sans-serif; font-size: 14px; font-weight: normal;">May 03, 2012</span></p>
<h1><b>Was HTML5 Canvas vs Moveable Type</b></h1>
</td></tr> -->
</table>

</div>

<div id="archContent">

<div class="blog">

<!-- TOP NAVIGATION MENU, SUPPRESSED -->

<!-- <div id="menu">
<a href="https://www.botzilla.com/blog/archives/000736.html">&laquo; Prev: <i>Playing All Sides</i></a>
&laquo; |

<a href="https://www.botzilla.com/blog/">Current</a> |
<a href="https://www.botzilla.com/blog/index.xml" title="Subscribe">RSS</a> |
<a href="https://www.botzilla.com/blog/archives.html">Links+Archives</a>

</div> -->


<!-- <h2 class="date">May 03, 2012</h2> -->

<div class="blogbody">

<!-- <p><span class="catty">
<a href="https://www.botzilla.com/blog/archives/cat_nuke_em_from_orbit.html">Nuke Em from Orbit</a>

</span> -->
    <!-- <span class="etitle">Was HTML5 Canvas vs Moveable Type</span> -->
<!-- </p> -->

<script type="text/javascript">


var mX = 0;
var mY = 0;
var gSpreed = 2;
var gScroll = 0;

var sino = function(V,W,H)
{
	var f = 0.8*Math.sin(V/W);
	var hh = H/2.0;
	var y = hh + hh*f;
	return y;
}

function next_loc(X,Scroll,W,H,Freq,Scale)
{
	var y = sino(Freq*(Scroll+X),W,H);
	var dx = (X-mX)/Scale;
	var dy = (y-mY)/Scale;
	var s = dx*dx+dy*dy;
	var n = Math.sqrt(s);
	dx /= n;
	dy /= n;
	var x = X+dx/s;
	y = y+dy/s;
	return new Array(x,y);
}

gFreqs = new Array(19,20,17,50,3,10,18,19.1);
gScales = new Array(340,100,80,250,50,102,44,400);
gColors = new Array();
gScroll = new Array();
gSpeeds = new Array();

function r255() { return Math.floor(Math.random()*255); }
function r255q() { return Math.floor(Math.random()*Math.random()*255); } // cauchy

function setup_colors() {
	var nc;
	for (var i=0; i<gFreqs.length; i++) {
		nc = "rgba("+r255q()+","+r255q()+","+r255q()+",0.5)";
		gColors.push(nc);
		gScroll.push(0.0);
		gSpeeds.push(1.0+Math.random()*2.0);
	}
}

function draw_c1() {
	var cv = document.getElementById('c1');
	if (cv.getContext) {
		var w = cv.width; // 500.0;
		var h = cv.height; // 300.0;
		var ctx = cv.getContext('2d');
		// ctx.fillStyle = "rgb(90,10,0);";
		ctx.fillStyle = "rgb(240,240,240);";
		ctx.fillRect(0,0,w,h);
		if (gColors.length < 1) { setup_colors(); }
		var i;
		for (i=0; i<gFreqs.length; i++) {
			// ctx.strokeStyle = "rgba(255,255,190,.5);";
			ctx.strokeStyle = gColors[i];
			ctx.lineWidth=(1.0+(399.0/gScales[i]));
			ctx.beginPath();
			var a = next_loc(0,gScroll[i],w,h,gFreqs[i],gScales[i]);
			ctx.moveTo(a[0],a[1]);
			for (var x=1; x<w; x+=2) {
				a = next_loc(x,gScroll[i],w,h,gFreqs[i],gScales[i]);
				ctx.lineTo(a[0],a[1]);
			}
			ctx.stroke();
		        gScroll[i] += gSpeeds[i];
		}
	}
}

$(document).ready(function() {
   draw_c1();
   $("#c1").mousemove(function(e) {
	    mX = e.pageX-this.offsetLeft;
	    mY = e.pageY-this.offsetTop;
	    //$('#mousy').html(mX+'/'+mY);
   });
   setInterval(draw_c1,30);
});

</script>
<canvas id="c1" width=800 height=250></canvas>

<P>With a little fiddling it's easy enough to use &lt;CANVAS&gt; (and <a HREF="http://jquery.com/" TARGET="new">jquery</a>) in tandem with Botzilla's somewhat elderly (and modified) installation of <a href="http://www.movabletype.org/" target="new">Moveable Type.</a></P>

<P>Minor tricks:<UL>
<LI>Remember to suppress Text Formatting -- no automatic &lt;P&gt; tags</LI>
<LI>Between different blog entries, don't reuse variable names, or element names, if you think you might ever need to have multiple canvases on the same page (say, in index or search pages). You will disappear into the fourth circle of scoping hell.</lI>
<LI>Likewise, if you think that multiple canvases per page is a real possibility, then put each canvas's prep and render code into a distinct function, so that you can move your "onload()" or "$(document.ready()" functions into the header template, not the body of the entry itself. In the header, declare an initially-empty array of functions, and have your "ready()" function iterate through them. Then in the entry, add you render functions to that array of functions. That way, the "ready()" function can just know what's needing to be set up for the specific page, regardless of which entries are being displayed and the # of visible canvases (A perusal of the initial state of this entry will show that I don't always follow my own advice. But adding that to Botzilla is one of my next steps). Be sure to put that array and calling function into <I>all</I> of your index and entry templates!</LI>
<LI>Linked sites like Facebook won't show &lt;Canvas&gt; or other animating elements, so if you want a good thumbnail, try adding a hidden image like so: <B>&lt;IMG SRC="/photo/journal//may03e-15.jpg" STYLE="display: none;" /&gt;</B></LI>
<LI>MT's preview page doesn't have all this extra js etc built-in. I suppose you can add it, and I probably will over time --  but as a quick workaround, to get a preview, I save my entry, press "Publish," then immediately look at the front index page -- if there's anything wrong, immediately change the entry state back to "Draft" and save again. This will remove the entry from the front page and the RSS feed, but: the "permalink" actual page file (in this case, "/blog/archives/000737.html") will still be there! Download and debug locally, then transport your changes back into MT. A bit of a shuffle but it's a workflow that <i>can</i> get you from points A to B.</LI>
<LI>Beware tryin to test-post to Facebook, changing the contents of the blog entry (even for typos) and trying to post it to FB again -- FB caches everything the first time, so... if you want a change that will appear there, you need to make a new copy of your entire post, publish <i>that,</i> and hide the old one (how do I know this?).</LI>
</UL></P>

<IMG SRC="/photo/journal//may03e-15.jpg" STYLE="display: none;" />

<a name="more"></a>


<span class="posted"><!-- May  3, 2012 02:08 AM -->

<br clear="right" />
<br /><script type="text/javascript">
	document.write('<iframe src="' + fbBut("https://www.botzilla.com/blog/archives/000737.html") +'" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:350px; height:35px;" allowTransparency="true"></iframe>');
	</script>
<br clear="right" /></span>

</div>

<!-- BOTTOM DATE -->

<p><i>May 03, 2012</i></p>

<!-- BOTTOM NAVIGATION MENU  -->

<div id="menu">
<a href="https://www.botzilla.com/blog/archives/000736.html">&laquo; Prev: <i>Playing All Sides</i></a>
&laquo; |

<a href="https://www.botzilla.com/blog/">Current</a> |
<a href="https://www.botzilla.com/blog/index.xml" title="Subscribe">RSS</a> |
<a href="https://www.botzilla.com/blog/archives.html">Links+Archives</a>

<!-- <br />
Like the photography on <a href="/photo/">Botzilla</a>?
Make it a &raquo;
<a
href="http://www.photoblogs.org/update-list/?domain=botzilla.com&action_id=2"
    title="Vote '+' for Freedom" target="pbframe">
<span style="font-family: verdana, sans-serif;
font-size: 12px;
font-weight:bold;
text-decoration:none;
color: white;
background-color: #333;
border-left:1px solid #aaa;
border-top:1px solid #aaa;
border-right:1px solid #000;
border-bottom:1px solid #000;
padding:0px 3px 0px 3px;
margin:0px;">PHOTOBLOGS.ORG</span>
</a>
&laquo; Favorite -->


</div>


<div class="comments-head"><a name="comments"></a>Comments on "Was HTML5 Canvas vs Moveable Type"</div>




<div class="comments-head">Post a comment</div>

<div class="comments-body">
<form method="post" action="https://www.botzilla.com/cgi-bin/mt-comments.cgi" name="comments_form" onsubmit="if (this.bakecookie[0].checked) rememberMe(this)">
<input type="hidden" name="static" value="1" />
<input type="hidden" name="entry_id" value="737" />

<div style="width:180px; padding-right:15px; margin-right:15px; float:left; text-align:left; border-right:1px dotted #bbb;">
	<label for="author">Your Name:</label><br />
	<input tabindex="1" id="author" name="author" /><br /><br />

	<label for="email">Email Address (optional):</label><br />
	<input tabindex="2" id="email" name="email" /><br /><br />

	<label for="url">A URL you like:</label><br />
	<input tabindex="3" id="url" name="url" /><br /><br />
</div>

Remember personal info?<br />
<input type="radio" id="bakecookie" name="bakecookie" /><label for="bakecookie">Yes</label><input type="radio" id="forget" name="bakecookie" onclick="forgetMe(this.form)" value="Forget Info" style="margin-left: 15px;" /><label for="forget">No</label><br style="clear: both;" />

<label for="text">Comments:</label><br />
<textarea tabindex="4" id="text" name="text" rows="10" cols="90"></textarea><br /><br />

<input type="submit" name="preview" value="&nbsp;Preview&nbsp;" />
<input style="font-weight: bold;" type="submit" name="post" value="&nbsp;Post&nbsp;" /><br /><br />

</form>

<script type="text/javascript" language="javascript">
<!--
document.comments_form.email.value = getCookie("mtcmtmail");
document.comments_form.author.value = getCookie("mtcmtauth");
document.comments_form.url.value = getCookie("mtcmthome");
if (getCookie("mtcmtauth")) {
    document.comments_form.bakecookie[0].checked = true;
} else {
    document.comments_form.bakecookie[1].checked = true;
}
//-->
</script>
</div>


</div>
</div>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-4450500-1";
urchinTracker();
</script>
</body>
</html>